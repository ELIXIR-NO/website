---
interface Crumb {
    label: string;
    href?: string;
}

interface Props {
    crumbs?: Crumb[];
}

const { crumbs = [] } = Astro.props;

// Auto-generate from URL if not provided
const autoCrumbs = crumbs.length === 0
    ? Astro.url.pathname
        .split('/')
        .filter(Boolean)
        .map((segment, index, array) => ({
            label: segment
                .split('-')
                .map(w => w.charAt(0).toUpperCase() + w.slice(1))
                .join(' '),
            href: index < array.length - 1
                ? '/' + array.slice(0, index + 1).join('/')
                : undefined
        }))
    : crumbs;

const allCrumbs = [{ label: 'Home', href: '/' }, ...autoCrumbs];
---

<nav aria-label="Breadcrumb" class="mb-6">
    <ol class="flex items-center space-x-2 text-sm">
        {allCrumbs.map((crumb, index) => (
                <li class="flex items-center">
                    {index > 0 && (
                            <svg
                                    class="h-5 w-5 text-gray-400 mx-2"
                                    fill="currentColor"
                                    viewBox="0 0 20 20"
                                    aria-hidden="true"
                            >
                                <path d="M5.555 17.776l8-16 .894.448-8 16-.894-.448z" />
                            </svg>
                    )}
                    {crumb.href ? (
                            <a
                                    href={crumb.href}
                                    class="text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200 transition-colors"
                            >
                                {crumb.label}
                            </a>
                    ) : (
                            <span
                                    class="font-semibold text-gray-900 dark:text-white"
                                    aria-current="page"
                            >
            {crumb.label}
          </span>
                    )}
                </li>
        ))}
    </ol>
</nav>